# Exemple de fichier de secrets pour dandelion (VM Gitea)
# Copier ce fichier en secrets/dandelion.yaml et le chiffrer avec sops
#
# IMPORTANT: Ce fichier doit √™tre chiffr√© avant de le committer !
# NE JAMAIS COMMITTER LE FICHIER NON CHIFFR√â !
#
# Pour cr√©er et chiffrer le fichier de secrets:
# 1. Copier ce fichier: cp secrets/dandelion.yaml.example secrets/dandelion.yaml
# 2. √âditer avec sops: sops secrets/dandelion.yaml
# 3. Remplacer les valeurs avec vos vrais secrets
#
# IMPORTANT: Vous devez d'abord copier la cl√© age partag√©e sur la VM dandelion
# cp ~/.config/sops/age/key.txt √† /var/lib/sops-nix/key.txt (sur la VM)

# ========================================
# SECRETS UTILISATEUR
# ========================================

# Hash du mot de passe pour l'utilisateur jeremie
# G√©n√©rer avec: mkpasswd -m sha-512
# Le m√™me que pour magnolia si tu veux utiliser le m√™me mot de passe
jeremie-password-hash: $6$g/9Fke6IjYVALC5S$.uMMuJpIgro1MxwzBtvBMG7G2pP88ulMtl91kPWdg3nEuE3uigDQ164yqvtEEGKiFtuN8RaFok66AiIIwErvq1

# ========================================
# SECRETS GITEA
# ========================================

gitea:
  # Mot de passe pour l'utilisateur admin Gitea
  # G√©n√©rer un mot de passe fort avec: openssl rand -base64 24
  # Cet utilisateur sera cr√©√© automatiquement au premier d√©marrage
  admin_password: "REMPLACER_PAR_MOT_PASSE_FORT"

# ========================================
# INSTRUCTIONS DE G√âN√âRATION DES SECRETS
# ========================================

# 1. Mot de passe admin Gitea (fort) :
#    openssl rand -base64 24
#    ou utiliser un gestionnaire de mots de passe

# 2. Hash du mot de passe utilisateur :
#    mkpasswd -m sha-512
#    (te demandera d'entrer le mot de passe interactivement)

# ========================================
# CHECKLIST AVANT DE CHIFFRER
# ========================================
# [ ] Tous les "REMPLACER_PAR" ont √©t√© remplac√©s
# [ ] Le mot de passe admin est fort et sauvegard√© dans un gestionnaire
# [ ] La cl√© age partag√©e est copi√©e sur la VM √† /var/lib/sops-nix/key.txt

# ========================================
# COMMANDES POUR CHIFFRER
# ========================================
# sops secrets/dandelion.yaml
# (√©diter les valeurs, sauvegarder, sops chiffrera automatiquement)

# V√©rifier que c'est bien chiffr√© :
# cat secrets/dandelion.yaml | grep "sops:"

# Si oui, tu peux committer :
# git add -f secrets/dandelion.yaml
# git commit -m "üîí Add encrypted secrets for dandelion"
